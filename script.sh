#!/usr/bin/env bash
mvn clean install;

testMap()
{
	mvn exec:java -Djava.awt.headless=true -Dexec.args="$*"
	tmp=${f%%.*}
	tmp2=${tmp#*/}
	map=${tmp2////-}
	mkdir -p scriptResults/${map}/
	cp island.log scriptResults/${map}/island.log
	cp Explorer.svg scriptResults/${map}/Explorer.svg
	cp Explorer_ise.json scriptResults/${map}/Explorer_ise.json
	cp _pois.json scriptResults/${map}/_pois.json
}

CONTRACTS16[0]="1 1 EAST 15000 4 8E80C1B12F0B7C40 WOOD 3000 QUARTZ 800 FLOWER 80 PLANK 1000" #Week 01
CONTRACTS16[1]="1 1 EAST 15000 4 71CE0F48848F322D WOOD 5000 QUARTZ 200 FLOWER 40 GLASS 50" #Week 02
CONTRACTS16[2]="1 1 SOUTH 20000 15 C0ECF96E85B08EFE WOOD 5000 QUARTZ 200 FLOWER 40 GLASS 50" #Week 03
CONTRACTS16[3]="1 1 EAST 10000 25 6C3E51CEEFA93D5F WOOD 4000 FUR 1000 GLASS 100" #Week 04
CONTRACTS16[4]="1 1 SOUTH 20000 25 3EAC7E4FF2A31F33 WOOD 7000 FUR 2000 PLANK 5000 GLASS 100" #Week 05
CONTRACTS16[5]="1 159 NORTH 20000 25 1DB7EB420E31D98A WOOD 15000 GLASS 100" #Week 06
CONTRACTS16[6]="1 159 NORTH 20000 25 EC4F4F3A4630034B WOOD 15000 GLASS 100 LEATHER 30" #Week 07
CONTRACTS16[7]="1 159 NORTH 20000 15 AE6942D415A29E7F WOOD 10000 GLASS 50 LEATHER 300" #Week 08
CONTRACTS16[8]="1 1 EAST 20000 15 DE577ABFB68A7E38 WOOD 10000 GLASS 50 LEATHER 300" #Week 09
CONTRACTS16[9]="158 158 NORTH 20000 15 DE05C9B2CE32BF74 WOOD 10000 QUARTZ 500 LEATHER 300 RUM 50" #Week 10
CONTRACTS16[10]="1 1 SOUTH 20000 15 C70825E4D144AA25 WOOD 10000 QUARTZ 100 ORE 50 LEATHER 300" #Week 11
CONTRACTS16[11]="1 1 SOUTH 20000 5 F72CAB3A55178C4C WOOD 5000 FUR 400 FLOWER 1 LEATHER 1000 INGOT 3" #Week 12
CONTRACTS16[12]="1 1 EAST 7000 15 E2D3535222C0D8B2 WOOD 1000 QUARTZ 300 FLOWER 10" #Week 46
CONTRACTS16[13]="1 1 EAST 7000 15 7C86C8F0AE471824 WOOD 1000 QUARTZ 300 FLOWER 10" #Week 47
CONTRACTS16[14]="152 159 NORTH 10000 3 7099D003D471C6D9 WOOD 2000 FUR 1000 GLASS 30" #Week 48
CONTRACTS16[15]="152 159 NORTH 10000 3 19ABF6AA7B22F38B WOOD 5000 SUGAR_CANE 1000 GLASS 300" #Week 49
CONTRACTS16[16]="1 1 EAST 10000 3 BE3EF65BEF2BD459 WOOD 1000 FUR 5000 GLASS 300" #Week 50
CONTRACTS16[17]="1 1 SOUTH 10000 25 9B4937D7A7783C0E WOOD 3000 FUR 3000 GLASS 100" #Week 51
CONTRACTS16[18]="1 1 EAST 10000 25 6C3E51CEEFA93D5F WOOD 4000 FUR 1000 GLASS 100" #Week 52
CONTRACTS16[19]="1 1 SOUTH 10000 25 68C81A2529ACAFF3 WOOD 5000 FLOWER 80 GLASS 100" #Week 53

CONTRACTS17[0]="1 1 EAST 25000 7 C212B31BDF5A67C9 WOOD 6000 FUR 400 QUARTZ 100 RUM 2" #Week 01
CONTRACTS17[1]="159 159 NORTH 30000 15 A022872CE09E2B9C WOOD 2000 FUR 100 QUARTZ 400 RUM 2" #Week 02
CONTRACTS17[2]="1 1 SOUTH 30000 10 F5C79AC1683D63C4 WOOD 2000 FUR 100 QUARTZ 400 RUM 2" #Week 05
CONTRACTS17[3]="1 1 EAST 33333 20 DFBF50881D18A3D1 WOOD 2000 FRUITS 20 SUGAR_CANE 400 PLANK 200 RUM 15" #Week 06
CONTRACTS17[4]="1 1 SOUTH 20000 10 DFBF50881D18A3D1 WOOD 8000 FRUITS 50 SUGAR_CANE 400 PLANK 1000 RUM 15" #Week 07
CONTRACTS17[5]="1 1 EAST 20000 10 31FE3642E86C572D WOOD 12000 FUR 200 FRUITS 100 ORE 10 RUM 15" #Week 08
CONTRACTS17[6]="1 1 EAST 40000 15 EEC15736EA27AC82 WOOD 12000 FUR 2000 FRUITS 100 FLOWER 500 GLASS 2 RUM 15" #Week 09
CONTRACTS17[7]="1 1 SOUTH 40000 15 14380CD23C8EB97B WOOD 25000 FISH 150 FRUITS 1 ORE 5 GLASS 10" #Week 10
CONTRACTS17[8]="1 1 EAST 40000 2 695D6D5C49335A7F WOOD 25000 QUARTZ 350 RUM 30" #Week 11
CONTRACTS17[9]="1 1 SOUTH 30000 2 FA3CC51778C0EDA6 WOOD 10000 FUR 1000 FLOWER 30 PLANK 35000 LEATHER 200 GLASS 50 RUM 30" #Week 12
CONTRACTS17[10]="1 1 EAST 20000 15 B03CA1A997813D02 WOOD 1000 QUARTZ 300 FLOWER 10" #Week 45
CONTRACTS17[11]="1 1 SOUTH 15000 2 EA1353A8F444831 WOOD 5000 INGOT 5" #Week 46
CONTRACTS17[12]="1 1 EAST 10000 7 72CBC0A8BEB5F77B WOOD 7000 FUR 400 RUM 10" #Week 47
CONTRACTS17[13]="1 1 SOUTH 15000 7 C3033B04FFBDB180 WOOD 5000 FUR 100 RUM 10" #Week 48
CONTRACTS17[14]="159 159 NORTH 15000 10 A43264158C840E1C WOOD 5000 FUR 100 INGOT 5" #Week 49
CONTRACTS17[15]="1 1 EAST 25000 13 FD4800CB733BB8FB WOOD 5000 FUR 400 FLOWER 2 INGOT 5" #Week 50
CONTRACTS17[16]="1 1 SOUTH 20000 6 1E4DDC10E2F381C WOOD 8000 QUARTZ 100 GLASS 2" #Week 52

CONTRACTS18[0]="159 159 NORTH 30000 15 161D552A4A22E2A1 WOOD 2000 FUR 100 QUARTZ 400 RUM 2" #Week 03
CONTRACTS18[1]="1 1 EAST 20000 7 5B75D6CC8B576BD4 WOOD 4000 QUARTZ 100" #Week 04
CONTRACTS18[2]="1 1 SOUTH 10000 4 90FEE7AB6C50731A FUR 500 QUARTZ 50 RUM 40" #Week 05
CONTRACTS18[3]="159 159 WEST 25000 14 7D66DD29D822074E FLOWER 500 QUARTZ 100 FRUITS 40 WOOD 1000" #Week 06
CONTRACTS18[4]="1 1 SOUTH 20000 7 A78293813D85BA02 QUARTZ 100 WOOD 3000" #Week 07
CONTRACTS18[5]="159 159 WEST 30000 30 DEB2DE91045B55E9 QUARTZ 100 WOOD 5000 FUR 200 RUM 10" #Week 08
CONTRACTS18[6]="1 1 SOUTH 30000 30 B390555FC76E2010 WOOD 5000 FLOWER 2 PLANK 1000 QUARTZ 200" #Week 09
CONTRACTS18[7]="1 1 EAST 15000 7 49FCBBF35EDDC6EA WOOD 5000 QUARTZ 20 LEATHER 50" #Week 10
CONTRACTS18[8]="1 1 EAST 20000 3 FE25C1A672968594 WOOD 7000 QUARTZ 20 FLOWER 5 RUM 5" #Week 11
CONTRACTS18[9]="1 1 EAST 20000 12 AB3DB02B0F1D78C6 WOOD 4000 QUARTZ 20 FUR 1000 RUM 5" #Week 12
CONTRACTS18[10]="159 159 NORTH 15000 7 B8743F260B1D24EF WOOD 7000 SUGAR_CANE 400 QUARTZ 20 RUM 5 ORE 4" #Week 13
CONTRACTS18[11]="1 1 EAST 10000 4 F8C2F759DFAC20BA WOOD 7000 FUR 500 FLOWER 5 GLASS 15" #Week 14
CONTRACTS18[12]="1 1 EAST 10000 4 FB9DDB405E0071F8 WOOD 500 FUR 500 SUGAR_CANE 400 GLASS 15" #Week 15
CONTRACTS18[13]="1 1 EAST 20000 12 6BC1958DDC3B44EE WOOD 5000 FUR 15 FLOWER 10 GLASS 10" #Week 16
CONTRACTS18[14]="1 1 SOUTH 30000 21 46604282EEFD7304 WOOD 15000 FUR 500 RUM 30 GLASS 20" #Week 17
CONTRACTS18[15]="1 1 SOUTH 30000 7 A27478436D119BD4 WOOD 3000 FUR 500 FLOWER 12 GLASS 20" #Week 18

index=0

if [[ "$1" == "16" || "$1" == "all" ]]; then
    for f in maps/island16/*.json; do
        testMap ${f} ${CONTRACTS16[index]};
        ((index++))
    done
fi

if [[ "$1" == "17" || "$1" == "all" ]]; then
    for f in maps/island17/*.json; do
        testMap ${f} ${CONTRACTS17[index]};
        ((index++))
    done
fi

if [[ "$1" == "18" || "$1" == "all" || "$1" == "" ]]; then
    for f in maps/island18/*.json; do
        testMap ${f} ${CONTRACTS18[index]};
        ((index++))
    done
fi

resPath=scriptResults/results.log
echo > ${resPath}
for f in scriptResults/*/island.log; do
	map=$(echo ${f} | cut -d'/' -f 2)
 	echo ${map} >> ${resPath}
	cat ${f} | awk  '$3 == "Report:" {i=1;next};i && i++' >> ${resPath}
	echo >> ${resPath}
done

mkdir -p CustomerValue
today=`date +%Y-%m-%d.%H:%M:%S`
cp ${resPath} CustomerValue/${today}.log